!function t(e,r,a){function n(s,o){if(!r[s]){if(!e[s]){var c="function"==typeof require&&require;if(!o&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=r[s]={exports:{}};e[s][0].call(h.exports,function(t){var r=e[s][1][t];return n(r||t)},h,h.exports,t,e,r,a)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<a.length;s++)n(a[s]);return n}({1:[function(t,e,r){"use strict";function a(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),s=function(){function t(){n(this,t),this.barThickness=40,this.barGutter=8,this.labelWidth=120,this.labelHeight=50,this.labelBaseline=20,this.labelColor="black",this.countColor="white",this.chartHeight=500}return i(t,[{key:"display",value:function(t,e){this.chart=t,this.maxSize=Math.max.apply(Math,a(this.chart.data.counts)),this.createSvg(e)}},{key:"createSvg",value:function(t){this.svg=d3.select(this.chart.el).append("svg").attr("width","100%").attr("height",t),this.chart.desc&&this.svg.append("desc").text(this.chart.desc)}},{key:"createBase",value:function(){var t=this,e=this.svg.selectAll("g").data(this.chart.data.counts).enter().append("g");return e.append("title").text(function(e,r){return"Data for "+t.chart.data.labels[r]}),e.append("desc").text(function(e,r){return"The number of "+t.chart.data.labels[r]+" is "+e+", which is "+t.getBarSize(e)+"% of the total."}),e}},{key:"getBarSize",value:function(t){return this.maxSize?t/this.maxSize*100:0}}]),t}();e.exports=s},{}],2:[function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),i=function(){function t(){a(this,t),this.size=500,this.radius=250}return n(t,[{key:"display",value:function(t){this.chart=t,this.createSvg(),this.createPie(),this.createLabels()}},{key:"createSvg",value:function(){this.svg=d3.select(this.chart.el).append("svg").attr("width",this.size).attr("height",this.size),this.chart.desc&&this.svg.append("desc").text(this.chart.desc)}},{key:"createPie",value:function(){var t=this,e=d3.arc().innerRadius(0).outerRadius(this.radius),r=d3.pie().value(function(t){return t}).sort(null);this.svg.append("g").attr("transform","translate("+this.radius+","+this.radius+")").selectAll("path").data(r(this.chart.data.counts)).enter().append("path").attr("d",e).attr("fill",function(e){return t.chart.colors[e.index]})}},{key:"createLabels",value:function(){for(var t=this.chart.data.counts.reduce(function(t,e){return t+parseInt(e)},0),e="",r=0;r<this.chart.data.labels.length;r++){e+='<p>\n                 <span class="legend" style="background: '+this.chart.colors[r]+'"></span>\n                 '+this.chart.data.labels[r]+" ("+Math.round(this.chart.data.counts[r]/t*100)+"%)\n               </p>"}$(this.chart.el).append(e)}}]),t}();e.exports=i},{}],3:[function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),i=t("../base/bar"),s=function(t){return t&&t.__esModule?t:{default:t}}(i),o=function(){function t(){a(this,t),this.pfBar=new s.default}return n(t,[{key:"display",value:function(t,e){this.pfBar.display(t,this.height),this.create()}},{key:"getHeight",value:function(){this.height=this.chart.data.counts.length*(this.pfBar.barThickness+this.pfBar.barGutter)}},{key:"create",value:function(){var t=this,e=this.pfBar.createBase();return e.append("rect").attr("height",this.pfBar.barThickness).attr("width",function(e){return t.pfBar.getBarSize(e)+"%"}).attr("x",this.pfBar.labelWidth).attr("y",function(e,r){return t.barY(r)}).attr("fill",function(e,r){return t.pfBar.chart.colors[r]}),e.append("text").text(function(e,r){return t.pfBar.chart.data.labels[r]}).attr("height",this.pfBar.barThickness).attr("y",function(e,r){return t.barY(r,t.pfBar.labelBaseline)}).attr("fill",this.pfBar.labelColor),e.append("text").text(function(t){return t}).attr("height",this.pfBar.barThickness).attr("x",this.pfBar.labelWidth+this.pfBar.barGutter).attr("y",function(e,r){return t.barY(r,t.pfBar.labelBaseline)}).attr("fill",this.pfBar.countColor),e}},{key:"barY",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-7;return t*this.pfBar.barThickness+t*this.pfBar.barGutter+e}}]),t}();e.exports=o},{"../base/bar":1}],4:[function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var n=t("./base/pie"),i=a(n),s=t("./components/bar-horizontal"),o=a(s),c={apiKey:"AIzaSyDwOQMIN3mLy9xyaiWrYJz1jZbozHB81Co",create:function(){var t=this,e=$("chart"),r=!0,a=!1,n=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)!function(){var e=i.value,r=t.getChartInfo(e),a=t.getSheetUrl(r.id);$.ajax(a,{success:function(e){r.data=t.processData(e),r.colors=t.generateColors(r),t.displayChart(r)},error:function(t){return console.log(t),!1}})}()}catch(t){a=!0,n=t}finally{try{!r&&s.return&&s.return()}finally{if(a)throw n}}},getChartInfo:function(t){var e={id:$(t).attr("data-id"),type:$(t).attr("data-type"),colorseed:$(t).attr("data-colorseed"),hue:$(t).attr("data-hue"),desc:$(t).html()},r=Math.floor(1e3*Math.random())+"";return $(t).replaceWith($('<div class="chart" data-id="'+e.id+'" id="chart-'+r+'"></div>')),e.el=$("div#chart-"+r)[0],e},getSheetUrl:function(t){return"https://sheets.googleapis.com/v4/spreadsheets/"+t+"/values/A2%3AZ1000/?key="+this.apiKey},processData:function(t){var e=[],r=[],a=!0,n=!1,i=void 0;try{for(var s,o=t.values[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var c=s.value;e.push(c[0]),r.push(c[1])}}catch(t){n=!0,i=t}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}return{labels:e,counts:r}},generateColors:function(t){var e=t.data.counts.length,r={count:e};return t.colorseed&&(r.seed=t.colorseed),t.hue&&(r.hue=t.hue),"horizontal-bar"!=t.type&&"vertical-bar"!=t.type||(r.luminosity="dark"),randomColor(r)},displayChart:function(t){switch(t.type){case"horizontal-bar":(new o.default).display(t,"horizontal");break;case"vertical-bar":pfBarChart.display(t,"vertical");break;case"pie":(new i.default).display(t)}}};$(document).ready(function(){c.create()})},{"./base/pie":2,"./components/bar-horizontal":3}]},{},[4]);
!function t(e,r,a){function n(o,s){if(!r[o]){if(!e[o]){var c="function"==typeof require&&require;if(!s&&c)return c(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[o]={exports:{}};e[o][0].call(l.exports,function(t){var r=e[o][1][t];return n(r||t)},l,l.exports,t,e,r,a)}return r[o].exports}for(var i="function"==typeof require&&require,o=0;o<a.length;o++)n(a[o]);return n}({1:[function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),i=function(){function t(){a(this,t),this.size=500,this.radius=250}return n(t,[{key:"display",value:function(t){this.chart=t,this.createSvg(),this.createPie(),this.createLabels()}},{key:"createSvg",value:function(){this.svg=d3.select(this.chart.el).append("svg").attr("width",this.size).attr("height",this.size),this.chart.desc&&this.svg.append("desc").text(this.chart.desc)}},{key:"createPie",value:function(){var t=this,e=d3.arc().innerRadius(0).outerRadius(this.radius),r=d3.pie().value(function(t){return t}).sort(null);this.svg.append("g").attr("transform","translate("+this.radius+","+this.radius+")").selectAll("path").data(r(this.chart.data.counts)).enter().append("path").attr("d",e).attr("fill",function(e){return t.chart.colors[e.index]})}},{key:"createLabels",value:function(){for(var t=this.chart.data.counts.reduce(function(t,e){return t+parseInt(e)},0),e="",r=0;r<this.chart.data.labels.length;r++){e+='<p>\n                 <span class="legend" style="background: '+this.chart.colors[r]+'"></span>\n                 '+this.chart.data.labels[r]+" ("+Math.round(this.chart.data.counts[r]/t*100)+"%)\n               </p>"}$(this.chart.el).append(e)}}]),t}();e.exports=i},{}],2:[function(t,e,r){"use strict";var a=t("./base/pie"),n=function(t){return t&&t.__esModule?t:{default:t}}(a),i={apiKey:"AIzaSyDwOQMIN3mLy9xyaiWrYJz1jZbozHB81Co",create:function(){var t=this,e=$("chart"),r=!0,a=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done);r=!0)!function(){var e=i.value,r=t.getChartInfo(e),a=t.getSheetUrl(r.id);$.ajax(a,{success:function(e){r.data=t.processData(e),r.colors=t.generateColors(r),t.displayChart(r)},error:function(t){return console.log(t),!1}})}()}catch(t){a=!0,n=t}finally{try{!r&&o.return&&o.return()}finally{if(a)throw n}}},getChartInfo:function(t){var e={id:$(t).attr("data-id"),type:$(t).attr("data-type"),colorseed:$(t).attr("data-colorseed"),hue:$(t).attr("data-hue"),desc:$(t).html()},r=Math.floor(1e3*Math.random())+"";return $(t).replaceWith($('<div class="chart" data-id="'+e.id+'" id="chart-'+r+'"></div>')),e.el=$("div#chart-"+r)[0],e},getSheetUrl:function(t){return"https://sheets.googleapis.com/v4/spreadsheets/"+t+"/values/A2%3AZ1000/?key="+this.apiKey},processData:function(t){var e=[],r=[],a=!0,n=!1,i=void 0;try{for(var o,s=t.values[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var c=o.value;e.push(c[0]),r.push(c[1])}}catch(t){n=!0,i=t}finally{try{!a&&s.return&&s.return()}finally{if(n)throw i}}return{labels:e,counts:r}},generateColors:function(t){var e=t.data.counts.length,r={count:e};return t.colorseed&&(r.seed=t.colorseed),t.hue&&(r.hue=t.hue),"horizontal-bar"!=t.type&&"vertical-bar"!=t.type||(r.luminosity="dark"),randomColor(r)},displayChart:function(t){switch(t.type){case"horizontal-bar":pfBarChart.display(t,"horizontal");break;case"vertical-bar":pfBarChart.display(t,"vertical");break;case"pie":(new n.default).display(t)}}};$(document).ready(function(){i.create()})},{"./base/pie":1}]},{},[2]);
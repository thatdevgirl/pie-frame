!function t(r,e,a){function n(s,o){if(!e[s]){if(!r[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(i)return i(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var c=e[s]={exports:{}};r[s][0].call(c.exports,function(t){var e=r[s][1][t];return n(e||t)},c,c.exports,t,r,e,a)}return e[s].exports}for(var i="function"==typeof require&&require,s=0;s<a.length;s++)n(a[s]);return n}({1:[function(t,r,e){"use strict";function a(t){if(Array.isArray(t)){for(var r=0,e=Array(t.length);r<t.length;r++)e[r]=t[r];return e}return Array.from(t)}function n(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,r){for(var e=0;e<r.length;e++){var a=r[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(r,e,a){return e&&t(r.prototype,e),a&&t(r,a),r}}(),s=function(){function t(){n(this,t),this.barThickness=40,this.barGutter=8,this.labelWidth=120,this.labelHeight=50,this.labelBaseline=20,this.labelColor="black",this.countColor="white",this.chartHeight=500}return i(t,[{key:"display",value:function(t,r){return this.chart=t,this.createSvg(r),this.createBase()}},{key:"createSvg",value:function(t){this.svg=d3.select(this.chart.el).append("svg").attr("width","100%").attr("height",t),this.chart.desc&&this.svg.append("desc").text(this.chart.desc)}},{key:"createBase",value:function(){var t=this,r=this.svg.selectAll("g").data(this.chart.data.counts).enter().append("g");return r.append("title").text(function(r,e){return"Data for "+t.chart.data.labels[e]}),r.append("desc").text(function(r,e){return"The number of "+t.chart.data.labels[e]+" is "+r+", which is "+t.getBarSize(r)+"% of the total."}),r}},{key:"getBarSize",value:function(t){var r=Math.max.apply(Math,a(this.chart.data.counts));return r?t/r*100:0}}]),t}();r.exports=s},{}],2:[function(t,r,e){"use strict";function a(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,r){for(var e=0;e<r.length;e++){var a=r[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(r,e,a){return e&&t(r.prototype,e),a&&t(r,a),r}}(),i=function(){function t(){a(this,t),this.size=500,this.radius=250}return n(t,[{key:"display",value:function(t){this.chart=t,this.createSvg(),this.createPie(),this.createLabels()}},{key:"createSvg",value:function(){this.svg=d3.select(this.chart.el).append("svg").attr("width",this.size).attr("height",this.size),this.chart.desc&&this.svg.append("desc").text(this.chart.desc)}},{key:"createPie",value:function(){var t=this,r=d3.arc().innerRadius(0).outerRadius(this.radius),e=d3.pie().value(function(t){return t}).sort(null);this.svg.append("g").attr("transform","translate("+this.radius+","+this.radius+")").selectAll("path").data(e(this.chart.data.counts)).enter().append("path").attr("d",r).attr("fill",function(r){return t.chart.colors[r.index]})}},{key:"createLabels",value:function(){for(var t=this.chart.data.counts.reduce(function(t,r){return t+parseInt(r)},0),r="",e=0;e<this.chart.data.labels.length;e++){r+='<p>\n                 <span class="legend" style="background: '+this.chart.colors[e]+'"></span>\n                 '+this.chart.data.labels[e]+" ("+Math.round(this.chart.data.counts[e]/t*100)+"%)\n               </p>"}$(this.chart.el).append(r)}}]),t}();r.exports=i},{}],3:[function(t,r,e){"use strict";function a(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,r){for(var e=0;e<r.length;e++){var a=r[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(r,e,a){return e&&t(r.prototype,e),a&&t(r,a),r}}(),i=t("../base/bar"),s=function(t){return t&&t.__esModule?t:{default:t}}(i),o=function(){function t(){a(this,t),this.pfBar=new s.default}return n(t,[{key:"display",value:function(t){return this.base=this.pfBar.display(t,this.getHeight(t)),this.drawBars(),this.drawLabels(),this.drawCounters(),this.base}},{key:"getHeight",value:function(t){return t.data.counts.length*(this.pfBar.barThickness+this.pfBar.barGutter)}},{key:"drawBars",value:function(){var t=this;this.base.append("rect").attr("height",this.pfBar.barThickness).attr("width",function(r){return t.pfBar.getBarSize(r)+"%"}).attr("x",this.pfBar.labelWidth).attr("y",function(r,e){return t.barY(e)}).attr("fill",function(r,e){return t.pfBar.chart.colors[e]})}},{key:"drawLabels",value:function(){var t=this;this.base.append("text").text(function(r,e){return t.pfBar.chart.data.labels[e]}).attr("height",this.pfBar.barThickness).attr("y",function(r,e){return t.barY(e,t.pfBar.labelBaseline)}).attr("fill",this.pfBar.labelColor)}},{key:"drawCounters",value:function(){var t=this;this.base.append("text").text(function(t){return t}).attr("height",this.pfBar.barThickness).attr("x",this.pfBar.labelWidth+this.pfBar.barGutter).attr("y",function(r,e){return t.barY(e,t.pfBar.labelBaseline)}).attr("fill",this.pfBar.countColor)}},{key:"barY",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-7;return t*this.pfBar.barThickness+t*this.pfBar.barGutter+r}}]),t}();r.exports=o},{"../base/bar":1}],4:[function(t,r,e){"use strict";function a(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,r){for(var e=0;e<r.length;e++){var a=r[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(r,e,a){return e&&t(r.prototype,e),a&&t(r,a),r}}(),i=t("../base/bar"),s=function(t){return t&&t.__esModule?t:{default:t}}(i),o=function(){function t(){a(this,t),this.pfBar=new s.default}return n(t,[{key:"display",value:function(t){return this.base=this.pfBar.display(t,this.pfBar.chartHeight),this.drawAxis(),this.drawBars(),this.drawLabels(),this.base}},{key:"drawAxis",value:function(){var t=d3.scaleLinear().range([this.pfBar.chartHeight-this.pfBar.labelHeight,0]);this.base.attr("transform","translate(40,10)"),this.base.call(d3.axisLeft(t))}},{key:"drawBars",value:function(){var t=this;this.base.append("rect").attr("height",function(r){return t.barHeight(r)+"px"}).attr("width",function(){return t.barWidth()+"%"}).attr("x",function(r,e){return t.barX(e)+"%"}).attr("y",function(r){return t.barY(r)}).attr("fill",function(r,e){return t.pfBar.chart.colors[e]})}},{key:"drawLabels",value:function(){var t=this;this.base.append("text").text(function(r,e){return t.pfBar.chart.data.labels[e]}).attr("height",this.pfBar.barThickness).attr("transform","translate(60,0)").attr("x",function(r,e){return t.barX(e)+"%"}).attr("y",this.pfBar.chartHeight-this.pfBar.labelHeight/2).attr("fill",this.pfBar.labelColor)}},{key:"barHeight",value:function(t){return this.pfBar.getBarSize(t)/100*(this.pfBar.chartHeight-this.pfBar.labelHeight)}},{key:"barWidth",value:function(){return(100-this.pfBar.chart.data.counts.length)/this.pfBar.chart.data.counts.length}},{key:"barY",value:function(t){var r=this.barHeight(t);return this.pfBar.chartHeight-this.pfBar.labelHeight-r}},{key:"barX",value:function(t){return t*(this.barWidth()+1)}}]),t}();r.exports=o},{"../base/bar":1}],5:[function(t,r,e){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var n=t("./base/pie"),i=a(n),s=t("./components/bar-horizontal"),o=a(s),u=t("./components/bar-vertical"),h=a(u),c={apiKey:"AIzaSyDwOQMIN3mLy9xyaiWrYJz1jZbozHB81Co",create:function(){var t=this,r=$("chart"),e=!0,a=!1,n=void 0;try{for(var i,s=r[Symbol.iterator]();!(e=(i=s.next()).done);e=!0)!function(){var r=i.value,e=t.getChartInfo(r),a=t.getSheetUrl(e.id);$.ajax(a,{success:function(r){e.data=t.processData(r),e.colors=t.generateColors(e),t.displayChart(e)},error:function(t){return console.log(t),!1}})}()}catch(t){a=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(a)throw n}}},getChartInfo:function(t){var r={id:$(t).attr("data-id"),type:$(t).attr("data-type"),colorseed:$(t).attr("data-colorseed"),hue:$(t).attr("data-hue"),desc:$(t).html()},e=Math.floor(1e3*Math.random())+"";return $(t).replaceWith($('<div class="chart" data-id="'+r.id+'" id="chart-'+e+'"></div>')),r.el=$("div#chart-"+e)[0],r},getSheetUrl:function(t){return"https://sheets.googleapis.com/v4/spreadsheets/"+t+"/values/A2%3AZ1000/?key="+this.apiKey},processData:function(t){var r=[],e=[],a=!0,n=!1,i=void 0;try{for(var s,o=t.values[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var u=s.value;r.push(u[0]),e.push(u[1])}}catch(t){n=!0,i=t}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}return{labels:r,counts:e}},generateColors:function(t){var r=t.data.counts.length,e={count:r};return t.colorseed&&(e.seed=t.colorseed),t.hue&&(e.hue=t.hue),"horizontal-bar"!=t.type&&"vertical-bar"!=t.type||(e.luminosity="dark"),randomColor(e)},displayChart:function(t){switch(t.type){case"horizontal-bar":(new o.default).display(t);break;case"vertical-bar":(new h.default).display(t);break;case"pie":(new i.default).display(t)}}};$(document).ready(function(){c.create()})},{"./base/pie":2,"./components/bar-horizontal":3,"./components/bar-vertical":4}]},{},[5]);
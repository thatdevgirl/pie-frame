"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var a=0,e=Array(t.length);a<t.length;a++)e[a]=t[a];return e}return Array.from(t)}var pfBarChart={config:{barThickness:25,barGutter:8,labelWidth:100,labelHeight:100,labelBaseline:20,labelColor:"black"},display:function(t,a){this.chart=t,this.orientation=a,this.processChartData(),this.getSvgDimensions(),this.createSvg(),this.createBars(),this.createLabels()},processChartData:function(){this.labels=[],this.dataset=[];var t=!0,a=!1,e=void 0;try{for(var i,r=this.chart.data.values[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;this.labels.push(s[0]),this.dataset.push(s[1])}}catch(t){a=!0,e=t}finally{try{!t&&r.return&&r.return()}finally{if(a)throw e}}},createSvg:function(){switch(this.orientation){case"horizontal":this.svg=d3.select(this.chart.el).append("svg").attr("width","100%").attr("height",this.height);break;case"vertical":this.svg=d3.select(this.chart.el).append("svg").attr("width","100%").attr("height",this.height)}},createBars:function(){var t=this;switch(this.orientation){case"horizontal":return this.svg.selectAll("rect").data(this.dataset).enter().append("rect").attr("height",this.config.barThickness).attr("width",function(a){return t.getBarSize(a)+"%"}).attr("x",this.config.labelWidth).attr("y",function(a,e){return t.getBarLocation(e)}).attr("fill","blue");case"vertical":return this.svg.selectAll("rect").data(this.dataset).enter().append("rect").attr("height",function(a){return t.getBarSize(a)+"%"}).attr("width",this.config.barThickness).attr("x",function(a,e){return t.getBarLocation(e)}).attr("y",function(a){return t.getVerticalBarBase(a)}).attr("fill","blue")}},createLabels:function(){var t=this;return this.svg.selectAll("text").data(this.labels).enter().append("text").text(function(t){return t}).attr("height",this.config.barThickness).attr("y",function(a,e){return t.getBarLocation(e,t.config.labelBaseline)}).attr("fill",this.config.labelColor)},getSvgDimensions:function(){"horizontal"==this.orientation?(this.width=Math.max.apply(Math,_toConsumableArray(this.dataset)),this.height=this.dataset.length*(this.config.barThickness+this.config.barGutter)):"vertical"==this.orientation&&(this.width=this.dataset.length*(this.config.barThickness+this.config.barGutter),this.height=Math.max.apply(Math,_toConsumableArray(this.dataset))+this.labelHeight)},getBarSize:function(t){return t/this.width*100},getBarLocation:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t*this.config.barThickness+t*this.config.barGutter+a},getVerticalBarBase:function(t){return this.height-this.getBarSize(t)/100*this.height+this.labelHeight}},pieFrame={apiKey:"AIzaSyDwOQMIN3mLy9xyaiWrYJz1jZbozHB81Co",create:function(){var t=this,a=$("chart"),e=!0,i=!1,r=void 0;try{for(var s,n=function(){var a=s.value,e=t.getChartInfo(a),i=t.getSheetUrl(e.id);$.ajax(i,{success:function(a){e.data=a,t.processData(e)},error:function(t){return console.log(t),!1}})},h=a[Symbol.iterator]();!(e=(s=h.next()).done);e=!0)n()}catch(t){i=!0,r=t}finally{try{!e&&h.return&&h.return()}finally{if(i)throw r}}},getChartInfo:function(t){var a={id:$(t).attr("data-id"),type:$(t).attr("data-type")};return $(t).replaceWith($('<div class="chart" data-id="'+a.id+'"></div>')),a.el=$("div[data-id="+a.id+"]")[0],a},getSheetUrl:function(t){return"https://sheets.googleapis.com/v4/spreadsheets/"+t+"/values/A2%3AZ1000/?key="+this.apiKey},processData:function(t){switch(t.type){case"horizontal-bar":pfBarChart.display(t,"horizontal");break;case"vertical-bar":pfBarChart.display(t,"vertical")}}};$(document).ready(function(){pieFrame.create()});
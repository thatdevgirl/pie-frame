"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var a=0,e=Array(t.length);a<t.length;a++)e[a]=t[a];return e}return Array.from(t)}var pieFrame={apiKey:"AIzaSyDwOQMIN3mLy9xyaiWrYJz1jZbozHB81Co",create:function(){var t=this,a=$("chart"),e=!0,i=!1,r=void 0;try{for(var n,s=function(){var a=n.value,e=t.getChartInfo(a),i=t.getSheetUrl(e.id);$.ajax(i,{success:function(a){e.data=t.processData(a),t.displayChart(e)},error:function(t){return console.log(t),!1}})},h=a[Symbol.iterator]();!(e=(n=h.next()).done);e=!0)s()}catch(t){i=!0,r=t}finally{try{!e&&h.return&&h.return()}finally{if(i)throw r}}},getChartInfo:function(t){var a={id:$(t).attr("data-id"),type:$(t).attr("data-type")};return $(t).replaceWith($('<div class="chart" data-id="'+a.id+'"></div>')),a.el=$("div[data-id="+a.id+"]")[0],a},getSheetUrl:function(t){return"https://sheets.googleapis.com/v4/spreadsheets/"+t+"/values/A2%3AZ1000/?key="+this.apiKey},processData:function(t){var a=[],e=[],i=!0,r=!1,n=void 0;try{for(var s,h=t.values[Symbol.iterator]();!(i=(s=h.next()).done);i=!0){var c=s.value;a.push(c[0]),e.push(c[1])}}catch(t){r=!0,n=t}finally{try{!i&&h.return&&h.return()}finally{if(r)throw n}}return{labels:a,counts:e}},displayChart:function(t){switch(t.type){case"horizontal-bar":pfBarChart.display(t,"horizontal");break;case"vertical-bar":pfBarChart.display(t,"vertical");break;case"pie":pfPieChart.display(t)}}};$(document).ready(function(){pieFrame.create()});var pfBarChart={config:{barThickness:25,barGutter:8,labelWidth:100,labelHeight:100,labelBaseline:20,labelColor:"black"},display:function(t,a){this.chart=t,this.orientation=a,this.getSvgDimensions(),this.createSvg(),this.createBars(),this.createLabels()},createSvg:function(){switch(this.orientation){case"horizontal":this.svg=d3.select(this.chart.el).append("svg").attr("width","100%").attr("height",this.height);break;case"vertical":}},createBars:function(){var t=this;switch(this.orientation){case"horizontal":return this.svg.selectAll("rect").data(this.chart.data.counts).enter().append("rect").attr("height",this.config.barThickness).attr("width",function(a){return t.getBarSize(a)+"%"}).attr("x",this.config.labelWidth).attr("y",function(a,e){return t.getBarLocation(e)}).attr("fill","blue");case"vertical":return!1}},createLabels:function(){var t=this;return this.svg.selectAll("text").data(this.chart.data.labels).enter().append("text").text(function(t){return t}).attr("height",this.config.barThickness).attr("y",function(a,e){return t.getBarLocation(e,t.config.labelBaseline)}).attr("fill",this.config.labelColor)},getSvgDimensions:function(){"horizontal"==this.orientation?(this.width=Math.max.apply(Math,_toConsumableArray(this.chart.data.counts)),this.height=this.chart.data.counts.length*(this.config.barThickness+this.config.barGutter)):"vertical"==this.orientation},getBarSize:function(t){return t/this.width*100},getBarLocation:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t*this.config.barThickness+t*this.config.barGutter+a},getVerticalBarBase:function(t){return this.height-this.getBarSize(t)/100*this.height+this.labelHeight}},pfPieChart={config:{size:500,radius:250},display:function(t){this.chart=t,this.createSvg(),this.createPie()},createSvg:function(){this.svg=d3.select(this.chart.el).append("svg").attr("width",this.config.size).attr("height",this.config.size)},createPie:function(){var t=d3.arc().innerRadius(0).outerRadius(this.config.radius),a=d3.pie().value(function(t){return t}).sort(null);this.svg.append("g").attr("transform","translate("+this.config.radius+","+this.config.radius+")").selectAll("path").data(a(this.chart.data.counts)).enter().append("path").attr("d",t).attr("fill",function(t){})}};
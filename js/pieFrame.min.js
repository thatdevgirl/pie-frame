"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var a=0,r=Array(t.length);a<t.length;a++)r[a]=t[a];return r}return Array.from(t)}var pfBarChart={config:{barThickness:20,barGutter:4,labelWidth:100,labelBaseline:16},display:function(t){var a=this.config;this.labels=[],this.dataset=[];var r=!0,e=!1,i=void 0;try{for(var n,s=t.data.values[Symbol.iterator]();!(r=(n=s.next()).done);r=!0){var h=n.value;this.labels.push(h[0]),this.dataset.push(h[1])}}catch(t){e=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(e)throw i}}var c=Math.max.apply(Math,_toConsumableArray(this.dataset)),o=this.dataset.length*(a.barThickness+a.barGutter);this.svg=this.createSvg({chart:t,height:o});this.createBarChartBars({width:c}),this.createLabels()},createSvg:function(t){return d3.select(t.chart.el).append("svg").attr("width","100%").attr("height",t.height)},createBarChartBars:function(t){var a=this,r=this.svg.selectAll("rect").data(this.dataset).enter().append("rect");return r.attr("height",this.config.barThickness).attr("width",function(r){return a.getBarSize(r,t.width)}).attr("x",this.config.labelWidth).attr("y",function(t,r){return a.getBarLocation(r)}).attr("fill","blue"),r},createLabels:function(t){var a=this,r=this.svg.selectAll("text").data(this.labels).enter().append("text");return r.text(function(t){return t}).attr("height",this.config.barThickness).attr("y",function(t,r){return a.getBarLocation(r,a.config.labelBaseline)}).attr("fill","black"),r},getBarSize:function(t,a){return t/a*100+"%"},getBarLocation:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t*this.config.barThickness+t*this.config.barGutter+a}},pieFrame={apiKey:"AIzaSyDwOQMIN3mLy9xyaiWrYJz1jZbozHB81Co",create:function(){var t=this,a=$("chart"),r=!0,e=!1,i=void 0;try{for(var n,s=function(){var a=n.value,r=t.getChartInfo(a),e=t.getSheetUrl(r.id);$.ajax(e,{success:function(a){r.data=a,t.processData(r)},error:function(t){return console.log(t),!1}})},h=a[Symbol.iterator]();!(r=(n=h.next()).done);r=!0)s()}catch(t){e=!0,i=t}finally{try{!r&&h.return&&h.return()}finally{if(e)throw i}}},getChartInfo:function(t){var a={id:$(t).attr("data-id"),type:$(t).attr("data-type")};return $(t).replaceWith($('<div class="chart" data-id="'+a.id+'"></div>')),a.el=$("div[data-id="+a.id+"]")[0],a},getSheetUrl:function(t){return"https://sheets.googleapis.com/v4/spreadsheets/"+t+"/values/A2%3AZ1000/?key="+this.apiKey},processData:function(t){switch(t.type){case"horizontal-bar":pfBarChart.display(t);break;case"vertical-bar":}}};$(document).ready(function(){pieFrame.create()});